resources:
- name: pipeline-code
  type: git
  source:
    uri: https://github.com/nikozl/tests

- name: every-20m
  type: time
  source:
    interval: 20m

jobs:
- name: job-generate-and-pass-file
  public: true
  plan:
  - get: pipeline-code
    trigger: true
  - get: every-20m
    trigger: true
  - task: generate-file
    file: pipeline-code/niko/task_generate_file.yml
  - task: show-file
    file: pipeline-code/niko/task_show_file.yml

- name: job-confirm
  public: true
  plan:
  - get: pipeline-code
    trigger: true
    passed: [job-generate-and-pass-file]
  - task: say-done
    file: pipeline-code/niko/task_say_done.yml

- name: job-niko
  public: true
  plan:
  - get: pipeline-code
    trigger: true
    passed: [job-confirm]
  - task: update-files
    file: pipeline-code/niko/task_update_files.yml
